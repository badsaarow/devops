# 유스케이스: 시스템 안전성 관리 (SWR-BMS-NFR-003)

## 개요

- 유스케이스 ID: UC-BMS-NFR-003
- 액터:
  - 안전 관리자
  - 센서 모니터
  - 오류 로거
  - 안전 감시자
- 선행조건:
  - 안전 모니터링 시스템 활성화
  - 중복 센서 시스템 정상 작동
  - 안전 진단 시스템 준비
- 후행조건: ASIL-D 수준의 안전성 유지

## Basic Path (정상 경로)

### 안전 상태 모니터링

1. 시스템 안전 상태 주기적 점검 (10ms 주기)
   - 핵심 안전 파라미터 확인
   - 센서 데이터 유효성 검증
   - 시스템 동작 상태 확인
2. 안전 제약조건 준수 확인
3. 안전 상태 보고
4. 안전 메트릭 업데이트

### 중복 센서 데이터 관리

1. 주/보조 센서 데이터 수집
2. 센서 데이터 비교 검증
   - 전압 센서 데이터
   - 전류 센서 데이터
   - 온도 센서 데이터
3. 편차 분석
4. 유효 데이터 선정

### 오류 로깅

1. 안전 관련 이벤트 감지
2. 이벤트 상세 정보 수집
3. 시간순 로그 기록
4. 중요도별 분류 저장

## Alternate Paths (대체 경로)

### A1. 경미한 안전 위반

1. 안전 제약조건 경미한 위반 감지
2. 위반 상황 분석
3. 자동 보정 수행
4. 이벤트 기록

### A2. 센서 데이터 불일치

1. 센서 간 데이터 불일치 감지
2. 불일치 수준 평가
3. 신뢰도 기반 데이터 선택
4. 센서 상태 점검 예약

### A3. 안전 마진 접근

1. 안전 마진 임계값 접근 감지
2. 예방적 조치 실행
3. 운영 파라미터 조정
4. 상황 모니터링

## Exception Paths (예외 경로)

### E1. 심각한 안전 위반

1. 심각한 안전 위반 감지
2. 즉시 Fail-safe 모드 전환
   - 전력 차단
   - 안전 릴레이 개방
   - 격리 시스템 활성화
3. 비상 정지 절차 실행
4. 안전 상태 유지
5. 상세 진단 정보 저장

### E2. 중복 센서 동시 실패

1. 다중 센서 실패 감지
2. 안전 중요도 평가
3. 대체 측정 방법 적용
4. 제한 운영 모드 전환
5. 긴급 유지보수 요청

### E3. 시스템 안전 기능 실패

1. 안전 기능 실패 감지
2. 백업 안전 시스템 활성화
3. 핵심 기능 유지 확인
4. 안전 관련 데이터 백업
5. 시스템 격리

## ISO 26262 ASIL-D 준수 요구사항

### 하드웨어 안전성

- 하드웨어 아키텍처 메트릭 충족
- 단일점 결함 허용성
- 잠재 결함 제어
- 안전 목표 달성 검증

### 소프트웨어 안전성

- MISRA-C 준수
- 정적 코드 분석
- 동적 테스트 커버리지
- 소프트웨어 FMEA

### 안전 메커니즘

- 자가 진단
- 상호 감시
- 투표 시스템
- 이중화 관리

## Fail-safe 모드 요구사항

### 진입 조건

- 심각한 안전 위반
- 중복 시스템 실패
- 통신 두절
- 크리티컬 센서 실패

### 안전 조치

- 전력 시스템 격리
- 안전 상태 유지
- 운전자 경고
- 진단 데이터 저장

## 데이터 검증 요구사항

### 센서 데이터

- 샘플링 주기: 10ms
- 허용 편차: ±2%
- 검증 윈도우: 100ms
- 불일치 허용 횟수: 3회

### 안전 로깅

- 로깅 주기: 실시간
- 저장 기간: 30일
- 중요 이벤트 영구 저장
- 로그 무결성 보장

## 성능 지표

- 안전 위반 검출 시간: ≤ 10ms
- Fail-safe 전환 시간: ≤ 50ms
- 데이터 검증 시간: ≤ 5ms
- 로그 저장 지연: ≤ 1ms
